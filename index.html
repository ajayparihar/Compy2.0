<!doctype html>
<html lang="en" data-theme="dark-mystic-forest">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Compy 2.0 - A lightweight, offline-first clipboard and snippet manager. Save, organize, and search text snippets with tags." />
  <meta name="keywords" content="clipboard manager, snippet manager, text snippets, productivity, offline-first" />
  <meta name="author" content="Bheb Developer" />
  <meta name="theme-color" content="#4ade80" media="(prefers-color-scheme: dark)" />
  <meta name="theme-color" content="#ea580c" media="(prefers-color-scheme: light)" />
  
  <title>Compy 2.0</title>
  
  <link rel="stylesheet" href="css/compy.css" />
  <link rel="icon" href="favicon_io/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon_io/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon_io/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="favicon_io/apple-touch-icon.png">
  <link rel="manifest" href="favicon_io/site.webmanifest">
  
  <!-- Preload critical resources -->
  <link rel="preload" href="css/compy.css" as="style" />
  <link rel="preload" href="js/compy.js" as="script" />
</head>
<body>
  <header class="navbar" role="banner">
    <div class="left">
      <button id="brand" class="brand" title="Refresh page" aria-label="Compy - Refresh page">Compy 2.0</button>
      <span id="profileDisplay" class="profile-display" aria-label="Current user profile"></span>
    </div>
    <div class="center">
      <div class="search" role="search">
        <label for="searchInput" class="sr-only">Search snippets</label>
        <input 
          id="searchInput" 
          type="search" 
          placeholder="Search snippets (Ctrl+F or /)" 
          aria-label="Search snippets"
          autocomplete="off"
          spellcheck="false" />
        <button 
          id="searchClear" 
          class="icon-btn" 
          title="Clear search" 
          aria-label="Clear search input"
          tabindex="-1">
          <span aria-hidden="true">✕</span>
        </button>
      </div>
    </div>
    <div class="right">
      <button 
        id="addBtn" 
        class="primary-btn" 
        title="Add new snippet" 
        aria-label="Add new snippet">
        <span aria-hidden="true"><b>＋</b></span>
        <span class="sr-only">Add</span>
      </button>
      <button 
        id="filterBtn" 
        class="icon-text-btn" 
        title="Filter snippets by tags" 
        aria-label="Filter snippets by tags"
        aria-describedby="filterBadge">
        Filter 
        <span id="filterBadge" class="badge" hidden aria-label="Active filters count">0</span>
      </button>
      <label for="themeSelect" class="sr-only">Select theme</label>
      <select id="themeSelect" title="Select theme" aria-label="Select color theme">
        <optgroup label="Dark themes">
          <option value="dark-mystic-forest">Mystic Forest</option>
          <option value="dark-crimson-night">Crimson Night</option>
          <option value="dark-royal-elegance">Royal Elegance</option>
        </optgroup>
        <optgroup label="Light themes">
          <option value="light-sunrise">Sunrise</option>
          <option value="light-soft-glow">Soft Glow</option>
          <option value="light-floral-breeze">Floral Breeze</option>
        </optgroup>
      </select>
      <label class="file-btn" title="Import snippets from file">
        <input 
          id="importFile" 
          type="file" 
          accept=".json,.csv" 
          hidden 
          aria-label="Choose file to import snippets" />
        <span>Import</span>
      </label>
      <div class="menu">
        <button 
          id="exportMenuBtn" 
          class="icon-text-btn" 
          title="Export options" 
          aria-label="Export options menu"
          aria-expanded="false"
          aria-haspopup="menu">
          Export <span aria-hidden="true">▾</span>
        </button>
        <div id="exportMenu" class="menu-panel" role="menu" aria-label="Export options">
          <button role="menuitem" data-export="json" aria-label="Export all snippets as JSON">Export JSON</button>
          <button role="menuitem" data-export="csv" aria-label="Export all snippets as CSV">Export CSV</button>
          <button role="menuitem" id="backupsBtn" aria-label="View backup files">Backups</button>
        </div>
      </div>
      <button 
        id="profileEditBtn" 
        class="icon-text-btn" 
        title="Edit your profile" 
        aria-label="Edit your profile">Profile</button>
      <button 
        id="aboutBtn" 
        class="icon-text-btn" 
        title="About Compy 2.0" 
        aria-label="About Compy 2.0">About</button>
    </div>
  </header>

  <main id="main" role="main">
    <section id="cards" class="cards" aria-label="Snippet cards" role="region">
      <!-- Cards injected here; skeletons shown initially -->
    </section>
    
    <!-- Live region for announcements -->
    <div id="liveRegion" class="sr-only" aria-live="polite" aria-atomic="false"></div>
  </main>

  <!-- Add/Edit Modal -->
  <div 
    id="itemModal" 
    class="modal" 
    role="dialog" 
    aria-hidden="true" 
    aria-labelledby="itemModalTitle" 
    aria-describedby="itemModalDesc">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="itemModalTitle">Add Snippet</h3>
        <button 
          class="icon-btn" 
          data-close-modal 
          aria-label="Close modal" 
          title="Close modal">
          <span aria-hidden="true">✕</span>
        </button>
      </div>
      <div class="modal-body">
        <p id="itemModalDesc" class="sr-only">Create or edit a text snippet with description and tags</p>
        <form id="itemForm" novalidate>
          <div class="field">
            <label for="itemText">Snippet Content <span aria-hidden="true">*</span></label>
            <div class="input-wrap with-clear">
              <textarea 
                id="itemText" 
                rows="3" 
                maxlength="500" 
                required 
                aria-required="true"
                aria-describedby="itemTextHelp"
                placeholder="Enter your text snippet here..."></textarea>
              <button 
                class="clear-field" 
                type="button"
                data-clear="#itemText" 
                aria-label="Clear snippet content" 
                tabindex="-1">
                <span aria-hidden="true">✕</span>
              </button>
            </div>
            <div id="itemTextHelp" class="hint">The main text content of your snippet (required)</div>
          </div>
          <div class="field">
            <label for="itemSensitive" class="toggle">
              <input id="itemSensitive" type="checkbox" aria-describedby="sensitiveHelp" />
              <span class="switch" aria-hidden="true"></span>
              <span class="toggle-text">Mark as sensitive</span>
            </label>
            <div id="sensitiveHelp" class="hint">Sensitive snippets are masked on cards for privacy</div>
          </div>
          <div class="field">
            <label for="itemDesc">Description <span aria-hidden="true">*</span></label>
            <div class="input-wrap with-clear">
              <textarea 
                id="itemDesc" 
                rows="2" 
                maxlength="500" 
                required 
                aria-required="true"
                aria-describedby="itemDescHelp"
                placeholder="Brief description of this snippet..."></textarea>
              <button 
                class="clear-field" 
                type="button"
                data-clear="#itemDesc" 
                aria-label="Clear description" 
                tabindex="-1">
                <span aria-hidden="true">✕</span>
              </button>
            </div>
            <div id="itemDescHelp" class="hint">A brief description to help you identify this snippet (required)</div>
          </div>
          <div class="field">
            <label for="tagEntry">Tags</label>
            <div id="tagsInput" class="tags-input" role="group" aria-labelledby="tagsLabel">
              <div class="chips" id="tagChips" role="group" aria-label="Selected tags"></div>
              <input 
                id="tagEntry" 
                type="text" 
                placeholder="Type tag and press Enter" 
                aria-describedby="tagsHelp"
                autocomplete="off" />
            </div>
            <div id="tagsHelp" class="hint">Add tags to organize your snippets. Use backspace to remove the last tag.</div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="secondary-btn" type="button" data-close-modal>Cancel</button>
        <button id="saveItemBtn" class="primary-btn" type="submit" form="itemForm">Save Snippet</button>
      </div>
    </div>
  </div>

  <!-- Filter Modal -->
  <div 
    id="filterModal" 
    class="modal" 
    role="dialog" 
    aria-hidden="true" 
    aria-labelledby="filterModalTitle" 
    aria-describedby="filterModalDesc">
    <div class="modal-content small">
      <div class="modal-header">
        <h3 id="filterModalTitle">Filter by Tags</h3>
        <button 
          class="icon-btn" 
          data-close-modal 
          aria-label="Close filter modal" 
          title="Close modal">
          <span aria-hidden="true">✕</span>
        </button>
      </div>
      <div class="modal-body">
        <p id="filterModalDesc" class="sr-only">Select tags to filter your snippets</p>
        <div class="field with-clear">
          <label for="filterTagSearch" class="sr-only">Search available tags</label>
          <input 
            id="filterTagSearch" 
            type="search" 
            placeholder="Search tags..." 
            aria-label="Search available tags"
            autocomplete="off" />
          <button 
            class="clear-field" 
            type="button"
            data-clear="#filterTagSearch" 
            aria-label="Clear tag search" 
            tabindex="-1">
            <span aria-hidden="true">✕</span>
          </button>
        </div>
        <div 
          id="filterTagList" 
          class="tag-select-list" 
          role="group" 
          aria-label="Available tags for filtering"></div>
      </div>
      <div class="modal-footer">
        <button class="secondary-btn" type="button" data-close-modal>Close</button>
        <div class="end-actions">
          <button id="clearFilterBtn" class="secondary-btn" type="button" aria-label="Clear all selected filters">Clear</button>
          <button id="applyFilterBtn" class="primary-btn" type="button">Apply Filter</button>
        </div>
      </div>
    </div>
  </div>

  <!-- More Tags Modal -->
  <div 
    id="moreTagsModal" 
    class="modal" 
    role="dialog" 
    aria-hidden="true" 
    aria-labelledby="moreTagsTitle">
    <div class="modal-content small">
      <div class="modal-header">
        <h3 id="moreTagsTitle">All Tags</h3>
        <button 
          class="icon-btn" 
          data-close-modal 
          aria-label="Close tags modal" 
          title="Close modal">
          <span aria-hidden="true">✕</span>
        </button>
      </div>
      <div class="modal-body">
        <div 
          id="allTagsList" 
          class="chips" 
          role="list" 
          aria-label="All available tags"></div>
      </div>
      <div class="modal-footer">
        <button class="secondary-btn" type="button" data-close-modal>Close</button>
      </div>
    </div>
  </div>

  <!-- Backups Modal -->
  <div 
    id="backupsModal" 
    class="modal" 
    role="dialog" 
    aria-hidden="true" 
    aria-labelledby="backupsTitle" 
    aria-describedby="backupsDesc">
    <div class="modal-content small">
      <div class="modal-header">
        <h3 id="backupsTitle">Backup Files</h3>
        <button 
          class="icon-btn" 
          data-close-modal 
          aria-label="Close backups modal" 
          title="Close modal">
          <span aria-hidden="true">✕</span>
        </button>
      </div>
      <div class="modal-body">
        <p id="backupsDesc" class="hint">Your most recent backup files (stored locally in browser). Click any backup to download.</p>
        <div 
          id="backupsList" 
          class="list" 
          role="list" 
          aria-label="Available backup files"></div>
      </div>
      <div class="modal-footer">
        <button class="secondary-btn" type="button" data-close-modal>Close</button>
      </div>
    </div>
  </div>


  <!-- Profile Modal -->
  <div 
    id="profileModal" 
    class="modal" 
    role="dialog" 
    aria-hidden="true" 
    aria-labelledby="profileTitle" 
    aria-describedby="profileDesc">
    <div class="modal-content small">
      <div class="modal-header">
        <h3 id="profileTitle">Edit Profile</h3>
        <button 
          class="icon-btn" 
          data-close-modal 
          aria-label="Close profile modal" 
          title="Close modal">
          <span aria-hidden="true">✕</span>
        </button>
      </div>
      <div class="modal-body">
        <p id="profileDesc" class="sr-only">Update your display name</p>
        <form id="profileForm" novalidate>
          <div class="field">
            <label for="profileNameInput">Your name</label>
            <div class="input-wrap with-clear">
              <input 
                id="profileNameInput" 
                type="text" 
                placeholder="e.g., Alex" 
                maxlength="80" 
                aria-describedby="profileNameHelp"
                autocomplete="name" />
              <button 
                class="clear-field" 
                type="button"
                data-clear="#profileNameInput" 
                aria-label="Clear name" 
                tabindex="-1">
                <span aria-hidden="true">✕</span>
              </button>
            </div>
            <div id="profileNameHelp" class="hint">Displayed next to Compy in the header for personalization</div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="secondary-btn" type="button" data-close-modal>Cancel</button>
        <button id="profileSaveBtn" class="primary-btn" type="submit" form="profileForm">Save Profile</button>
      </div>
    </div>
  </div>

  <!-- About Modal -->
  <div 
    id="aboutModal" 
    class="modal" 
    role="dialog" 
    aria-hidden="true" 
    aria-labelledby="aboutTitle">
    <div class="modal-content small">
      <div class="modal-header">
        <h3 id="aboutTitle">About Compy 2.0</h3>
        <button 
          class="icon-btn" 
          data-close-modal 
          aria-label="Close about modal" 
          title="Close modal">
          <span aria-hidden="true">✕</span>
        </button>
      </div>
      <div class="modal-body">
        <p><strong>Version 2.0</strong></p>
        <p>Compy 2.0 is a lightweight, offline‑first clipboard and snippet manager for the web. Save reusable text (commands, credentials, templates), organize with tags and search, and copy instantly — all stored locally with optional JSON/CSV import & export.</p>
        <nav class="about-actions" aria-label="External links">
          <a class="link-chip" href="mailto:bhebdeveloper@gmail.com" target="_blank" rel="noopener" aria-label="Send email to developer">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" focusable="false">
                <path fill="none" stroke="currentColor" stroke-width="2" d="M3 6h18v12H3z"/>
                <path fill="none" stroke="currentColor" stroke-width="2" d="M3 7l9 7 9-7"/>
              </svg>
            </span>
            <span>Email</span>
          </a>
          <a class="link-chip" href="https://github.com/ajayparihar" target="_blank" rel="noopener" aria-label="Visit developer's GitHub profile">
            <span class="icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" focusable="false">
                <path fill="currentColor" d="M12 .5a12 12 0 0 0-3.79 23.39c.6.11.82-.26.82-.58v-2.2c-3.35.73-4.06-1.41-4.06-1.41-.55-1.39-1.34-1.76-1.34-1.76-1.09-.75.08-.74.08-.74 1.21.08 1.85 1.25 1.85 1.25 1.07 1.84 2.8 1.31 3.49 1 .11-.78.42-1.31.76-1.61-2.67-.3-5.47-1.34-5.47-5.98 0-1.32.47-2.39 1.24-3.24-.12-.3-.54-1.52.12-3.17 0 0 1.01-.32 3.3 1.24a11.47 11.47 0 0 1 6 0c2.29-1.56 3.3-1.24 3.3-1.24.66 1.65.24 2.87.12 3.17.77.85 1.24 1.92 1.24 3.24 0 4.65-2.8 5.68-5.48 5.98.43.37.81 1.1.81 2.22v3.29c0 .32.22.7.83.58A12 12 0 0 0 12 .5"/>
              </svg>
            </span>
            <span>GitHub</span>
          </a>
          <a class="link-chip" href="https://github.com/ajayparihar/Compy2.0/issues" target="_blank" rel="noopener" aria-label="Report an issue on GitHub">
            <span>Report Issue</span>
          </a>
          <a class="link-chip" href="https://github.com/ajayparihar/Compy2.0" target="_blank" rel="noopener" aria-label="View source code repository">
            <span>Source Code</span>
          </a>
        </nav>
        <p class="about-meta">© 2025 Bheb Developer</p>
      </div>
      <div class="modal-footer">
        <button class="secondary-btn" type="button" data-close-modal>Close</button>
      </div>
    </div>
  </div>

  <!-- Toast notifications -->
  <div 
    id="snackbar" 
    class="snackbar" 
    role="status" 
    aria-live="polite" 
    aria-atomic="true"></div>

  <!-- JavaScript -->
  <script src="js/compy.js" defer></script>
  
  <!-- Service Worker for offline functionality (if available) -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(() => {
          // Service worker registration failed - no offline support
        });
      });
    }
  </script>
</body>
</html>

